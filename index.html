<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ—æ­æ¥µç°¡ç”Ÿæ´»åŠ©æ‰‹ - 2026 è¡Œç¨‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        /* åŒ—æ­é¢¨æ ¼è‰²æ¿ (æ·¡é›…ã€è‡ªç„¶) */
        :root {
            --color-primary: #4C5A67; /* æ·±ç°è— (æ–‡å­—/æ¨™é¡Œ) */
            --color-secondary: #B0C4DE; /* æ·ºç°è— (è¼”åŠ©/é‚Šæ¡†) */
            --color-background: #F8F8F8; /* å¹¾ä¹ç™½è‰² (èƒŒæ™¯) */
            --color-accent: #A3BE8C; /* è‹”è˜šç¶  (é»ç¶´/é‡é») */
            --color-card: #FFFFFF; /* å¡ç‰‡èƒŒæ™¯ */
        }
        /* å®šç¾© Tailwind é¡è‰²ä»¥ä¾¿åœ¨ class ä¸­ä½¿ç”¨ */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': 'var(--color-primary)',
                        'secondary': 'var(--color-secondary)',
                        'background': 'var(--color-background)',
                        'accent': 'var(--color-accent)',
                        'card': 'var(--color-card)',
                    }
                }
            }
        }
        /* ä¿æŒæ‰‹æ©ŸAppç¾æ„Ÿï¼šè®“é é¢æ’æ»¿è¢å¹•ä¸¦éš±è—æ²è»¸ */
        body {
            background-color: var(--color-background);
        }
        #app {
            max-width: 480px; /* æ¨¡æ“¬æ‰‹æ©Ÿå¯¬åº¦ */
            margin: 0 auto;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05); /* è¼•å¾®é™°å½±ï¼Œå¢åŠ è³ªæ„Ÿ */
            background-color: var(--color-background);
            padding-bottom: 70px; /* ç‚ºåº•éƒ¨å°èˆªç•™å‡ºç©ºé–“ */
        }
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ (åŒ—æ­é¢¨æ ¼ä¸å–œæ­¡çªå…€çš„å…ƒç´ ) */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: var(--color-secondary);
            border-radius: 10px;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<div id="app">

    <header class="p-4 bg-card shadow-sm sticky top-0 z-10">
        <h1 class="text-xl font-bold text-primary">ğŸŒ² åŒ—æ­æ¥µç°¡ç”Ÿæ´»</h1>
        <p class="text-sm text-secondary mt-1">{{ pageTitle }}</p>
    </header>

    <main class="p-4 overflow-y-auto" style="max-height: calc(100vh - 120px);">

        <section v-if="currentPage === 'schedule'" class="space-y-6">
            <h2 class="text-lg font-semibold text-primary mb-3">ğŸ§­ 2026 åŒ—æ­è¡Œ</h2>
            
            <button @click="showAddSchedule = true" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-opacity-90 transition-colors mt-4">
                <i class="fas fa-plus mr-2"></i>æ–°å¢è¡Œç¨‹
            </button>

            <div v-for="(day, date) in groupedSchedule" :key="date" class="space-y-3">
                <div class="flex items-center text-sm font-bold text-accent pt-4 border-t border-secondary border-opacity-30">
                    <i class="fas fa-calendar-alt mr-2"></i>
                    <span>{{ date }}</span>
                </div>

                <div v-for="(item, index) in day" :key="index" class="bg-card p-4 rounded-xl shadow-md transition-shadow hover:shadow-lg border-l-4 border-accent space-y-2">
                    
                    <div class="flex items-center text-sm text-primary font-medium" v-if="item.weather">
                        <i class="mr-2" :class="item.weather.icon" :style="{ color: item.weather.color }"></i>
                        <span>{{ item.weather.temp }}Â°Cï¼Œ{{ item.weather.condition }}</span>
                    </div>

                    <div class="flex justify-between items-start">
                        <div class="flex-grow">
                            <p class="text-xs text-secondary">{{ item.time }}</p>
                            <p class="text-primary font-bold mt-1">{{ item.title }}</p>
                            <p class="text-sm text-secondary mt-1">{{ item.location }}</p>
                        </div>
                        
                        <button @click="navigateTo(item.location)" class="bg-accent text-white p-2 ml-4 rounded-full hover:opacity-90 transition-colors flex-shrink-0">
                            <i class="fas fa-route"></i>
                        </button>
                    </div>
                </div>
            </div>
            
        </section>

        <section v-if="currentPage === 'account'" class="space-y-4">
            <h2 class="text-lg font-semibold text-primary mb-3">ğŸ’° ç°¡ç´„è¨˜å¸³</h2>

            <div class="bg-card p-4 rounded-xl shadow-md border-l-4 border-primary">
                <p class="text-sm text-secondary">åŒ—æ­è¡Œç¸½æ”¯å‡ºé è¨ˆ</p>
                <p class="text-3xl font-bold text-primary mt-1">NT$ {{ totalExpense.toLocaleString() }}</p>
            </div>

            <div class="bg-card p-4 rounded-xl shadow-md space-y-3">
                <h3 class="font-bold text-primary">è¨˜éŒ„æ–°æ”¯å‡º</h3>
                
                <div>
                    <label for="category" class="block text-sm font-medium text-primary mb-1">é¡åˆ¥</label>
                    <select id="category" v-model="newExpense.category" class="w-full p-2 border border-secondary rounded-lg bg-background text-primary focus:border-accent focus:ring focus:ring-accent focus:ring-opacity-50 transition-shadow">
                        <option value="" disabled>è«‹é¸æ“‡æ”¯å‡ºé¡åˆ¥</option>
                        <option v-for="cat in expenseCategories" :key="cat" :value="cat">{{ cat }}</option>
                    </select>
                </div>

                <div>
                    <label for="amount" class="block text-sm font-medium text-primary mb-1">é‡‘é¡ (NT$)</label>
                    <input type="number" id="amount" v-model.number="newExpense.amount" class="w-full p-2 border border-secondary rounded-lg bg-background text-primary focus:border-accent focus:ring focus:ring-accent focus:ring-opacity-50 transition-shadow" placeholder="è¼¸å…¥é‡‘é¡">
                </div>

                <button @click="addExpense" class="w-full bg-accent text-white py-2 rounded-lg hover:bg-opacity-90 transition-colors">
                    <i class="fas fa-save mr-2"></i>æ–°å¢è¨˜éŒ„
                </button>
            </div>
            
            <div class="space-y-2 pt-2">
                <div v-for="(exp, index) in expenses" :key="index" class="flex justify-between items-center bg-card p-3 rounded-lg shadow-sm">
                    <div class="flex items-center">
                        <span class="text-xl mr-3" :class="categoryIcon(exp.category)"></span>
                        <div>
                            <p class="font-medium text-primary">{{ exp.category }}</p>
                            <p class="text-xs text-secondary">{{ exp.date }}</p>
                        </div>
                    </div>
                    <p class="font-bold text-red-500">- NT$ {{ exp.amount.toLocaleString() }}</p>
                </div>
            </div>
        </section>

        <section v-if="currentPage === 'list'" class="space-y-4">
            <h2 class="text-lg font-semibold text-primary mb-3">ğŸ›’ æ¥µç°¡è³¼ç‰©æ¸…å–®</h2>

            <div class="flex space-x-2">
                <input type="text" v-model="newItemText" @keyup.enter="addItem" placeholder="è¼¸å…¥è³¼ç‰©é …ç›®..." class="flex-grow p-2 border border-secondary rounded-lg bg-background text-primary focus:border-accent focus:ring focus:ring-accent focus:ring-opacity-50 transition-shadow">
                <button @click="addItem" class="bg-primary text-white p-2 rounded-lg hover:bg-opacity-90 transition-colors">
                    <i class="fas fa-plus"></i>
                </button>
            </div>

            <div class="space-y-2 pt-2">
                <div v-for="(item, index) in shoppingList" :key="index" class="bg-card p-3 rounded-lg shadow-sm flex justify-between items-center transition-all" :class="{'opacity-60': item.completed}">
                    <label class="flex items-center space-x-3 cursor-pointer flex-grow">
                        <input type="checkbox" v-model="item.completed" class="form-checkbox h-5 w-5 text-accent rounded border-secondary focus:ring-accent transition-colors">
                        <span class="text-primary" :class="{'line-through text-secondary': item.completed}">{{ item.text }}</span>
                    </label>
                    <button @click="removeItem(index)" class="text-secondary hover:text-red-500 transition-colors">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </section>
        
        <section v-if="currentPage === 'map'" class="space-y-4">
            <h2 class="text-lg font-semibold text-primary mb-3">ğŸ“ è¡Œç¨‹åœ°åœ–ä½ç½®</h2>
            <div class="bg-card p-4 rounded-xl shadow-md h-80 flex items-center justify-center text-center text-secondary">
                <p>åœ°åœ– API æ¸²æŸ“å€</p>
                <p class="absolute mt-10 text-sm">ï¼ˆå¯¦éš›éƒ¨ç½²éœ€ä½¿ç”¨ Google Maps API Keyï¼‰</p>
                
            </div>
            <p class="text-sm text-secondary">æç¤ºï¼šåœ¨è¡Œç¨‹è¡¨é»æ“Šå°èˆªæŒ‰éˆ•å¯æŸ¥çœ‹åœ°é»ã€‚</p>
        </section>
        
        <div v-if="showAddSchedule" @click.self="showAddSchedule = false" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4">
            <div class="bg-card p-6 rounded-xl shadow-2xl w-full max-w-sm space-y-4">
                <h3 class="text-xl font-bold text-primary">æ–°å¢åŒ—æ­è¡Œç¨‹</h3>
                <input type="date" v-model="newScheduleItem.date" class="w-full p-2 border border-secondary rounded-lg">
                <input type="time" v-model="newScheduleItem.time" class="w-full p-2 border border-secondary rounded-lg">
                <input type="text" v-model="newScheduleItem.title" placeholder="æ´»å‹•æ¨™é¡Œ" class="w-full p-2 border border-secondary rounded-lg">
                <input type="text" v-model="newScheduleItem.location" placeholder="åœ°é»/åŸå¸‚" class="w-full p-2 border border-secondary rounded-lg">
                <div class="flex justify-end space-x-3">
                    <button @click="showAddSchedule = false" class="px-4 py-2 text-primary rounded-lg hover:bg-background">å–æ¶ˆ</button>
                    <button @click="addScheduleItem" class="px-4 py-2 bg-accent text-white rounded-lg hover:bg-opacity-90">æ–°å¢</button>
                </div>
            </div>
        </div>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 max-w-sm mx-auto bg-card border-t border-secondary shadow-lg flex justify-around p-2 z-20 rounded-t-xl">
        <button @click="changePage('schedule')" :class="{'text-accent': currentPage === 'schedule', 'text-secondary': currentPage !== 'schedule'}" class="flex flex-col items-center p-2 rounded-lg hover:bg-background transition-colors">
            <i class="fas fa-calendar-alt text-xl"></i>
            <span class="text-xs mt-1">è¡Œç¨‹</span>
        </button>
        <button @click="changePage('account')" :class="{'text-accent': currentPage === 'account', 'text-secondary': currentPage !== 'account'}" class="flex flex-col items-center p-2 rounded-lg hover:bg-background transition-colors">
            <i class="fas fa-wallet text-xl"></i>
            <span class="text-xs mt-1">è¨˜å¸³</span>
        </button>
        <button @click="changePage('list')" :class="{'text-accent': currentPage === 'list', 'text-secondary': currentPage !== 'list'}" class="flex flex-col items-center p-2 rounded-lg hover:bg-background transition-colors">
            <i class="fas fa-shopping-basket text-xl"></i>
            <span class="text-xs mt-1">è³¼ç‰©</span>
        </button>
        <button @click="changePage('map')" :class="{'text-accent': currentPage === 'map', 'text-secondary': currentPage !== 'map'}" class="flex flex-col items-center p-2 rounded-lg hover:bg-background transition-colors">
            <i class="fas fa-map-marked-alt text-xl"></i>
            <span class="text-xs mt-1">åœ°åœ–</span>
        </button>
    </nav>
</div>

<script>
    const { createApp, ref, computed } = Vue

    // TSV æª”æ¡ˆå…§å®¹ï¼Œç›´æ¥åµŒå…¥ JavaScript è®Šæ•¸
    const tsvData = `æ—¥æœŸ\tæ™‚é–“\tæ´»å‹•\tåœ°é»
2026/06/01\t08:00\tæ¡ƒåœ’åœ‹éš›æ©Ÿå ´å ±åˆ°\tå°ç£æ¡ƒåœ’åœ‹éš›æ©Ÿå ´
2026/06/01\t14:00\té£›å¾€ä¸¹éº¥å“¥æœ¬å“ˆæ ¹\tèˆªç­ç·¨è™Ÿ SK984
2026/06/02\t08:00\tæŠµé”å“¥æœ¬å“ˆæ ¹ï¼Œå‰å¾€é…’åº—\tå“¥æœ¬å“ˆæ ¹å‡±ç¾å¥§é…’åº—
2026/06/02\t11:00\tå°ç¾äººé­šé›•åƒåƒè§€\té•·å ¤å…¬åœ’
2026/06/02\t14:00\tæ–°æ¸¯(Nyhavn)é‹æ²³éŠèˆ¹\tæ–°æ¸¯ç¢¼é ­
2026/06/03\t09:30\tå¡éš†å ¡åŸå ¡ (HamletåŸå ¡)\tèµ«çˆ¾è¾›æ ¼
2026/06/04\t10:00\tæ­ä¹˜ç«è»Šå‰å¾€ç‘å…¸é¦¬çˆ¾é»˜\tå“¥æœ¬å“ˆæ ¹ä¸­å¤®è»Šç«™
2026/06/04\t15:00\té¦¬çˆ¾é»˜ç‰¹ç´ç‘å¤§æ¨“åƒè§€\tè¥¿æ¸¯
2026/06/05\t09:00\té¦¬çˆ¾é»˜æŠ€è¡“èˆ‡æµ·æ´‹åšç‰©é¤¨\té¦¬çˆ¾é»˜åšç‰©é¤¨
`;

    // è™•ç† TSV æª”æ¡ˆä¸¦è½‰æ›ç‚º Vue æ•¸æ“šçµæ§‹
    function parseTSV(tsv) {
        const lines = tsv.trim().split('\n');
        const headers = lines[0].split('\t');
        const data = [];

        for (let i = 1; i < lines.length; i++) {
            const values = lines[i].split('\t');
            if (values.length === headers.length) {
                const item = {
                    date: values[0].trim(),
                    time: values[1].trim(),
                    title: values[2].trim(),
                    location: values[3].trim(),
                    completed: false,
                    // éš¨æ©Ÿæ·»åŠ å¤©æ°£å‡è³‡æ–™ï¼Œä»¥ç¬¦åˆåŠŸèƒ½ 2 çš„è¦æ±‚
                    weather: generateMockWeather(),
                };
                data.push(item);
            }
        }
        return data;
    }

    // éš¨æ©Ÿç”ŸæˆåŒ—æ­åŸå¸‚å¤©æ°£å‡è³‡æ–™
    function generateMockWeather() {
        const conditions = [
            { cond: 'æ™´æœ—', icon: 'fas fa-sun', color: '#FFD700', temp: 18 },
            { cond: 'å¤šé›²', icon: 'fas fa-cloud-sun', color: '#A9A9A9', temp: 15 },
            { cond: 'å°é›¨', icon: 'fas fa-cloud-rain', color: '#6495ED', temp: 12 },
            { cond: 'é™°å¤©', icon: 'fas fa-cloud', color: '#B0C4DE', temp: 14 },
        ];
        const randomCondition = conditions[Math.floor(Math.random() * conditions.length)];
        return {
            temp: randomCondition.temp + Math.floor(Math.random() * 5),
            condition: randomCondition.cond,
            icon: randomCondition.icon,
            color: randomCondition.color
        };
    }

    // åˆå§‹åŒ– Vue App
    createApp({
        data() {
            return {
                currentPage: 'schedule', // é è¨­é é¢
                pageTitles: {
                    schedule: '2026 åŒ—æ­è¡Œè¨ˆç•«',
                    account: 'æ¸…æ¥šç°¡æ½”çš„è²¡å‹™ç®¡ç†',
                    list: 'ä¸å†éºæ¼ä»»ä½•ç´°ç¯€',
                    map: 'æ¢ç´¢æ‚¨çš„åŒ—æ­æ—…ç¨‹'
                },
                
                // --- è¡Œç¨‹è¡¨è³‡æ–™ (å·²å¾ TSV è¼‰å…¥) ---
                schedule: parseTSV(tsvData),
                showAddSchedule: false,
                newScheduleItem: {
                    date: '',
                    time: '',
                    title: '',
                    location: '',
                },
                
                // --- è¨˜å¸³è³‡æ–™ ---
                expenseCategories: ['ä½å®¿', 'äº¤é€š', 'é¤é£²', 'é–€ç¥¨/æ´»å‹•', 'è³¼ç‰©', 'é›œé …'], // åŠŸèƒ½ 1
                newExpense: {
                    category: '',
                    amount: null
                },
                expenses: [
                    { category: 'ä½å®¿', amount: 15000, date: '2026/05/20' },
                    { category: 'æ©Ÿç¥¨', amount: 35000, date: '2026/04/15' },
                ],

                // --- è³¼ç‰©æ¸…å–®è³‡æ–™ ---
                newItemText: '',
                shoppingList: [
                    { text: 'è½‰æ›æ’é ­', completed: false },
                    { text: 'æ­å…ƒç¾é‡‘', completed: true },
                    { text: 'è¼•è–„ä¿æš–è¡£ç‰©', completed: false },
                ]
            }
        },
        computed: {
            pageTitle() {
                return this.pageTitles[this.currentPage] || 'ç°¡ç´„ç”Ÿæ´»åŠ©æ‰‹';
            },
            totalExpense() {
                return this.expenses.reduce((sum, exp) => sum + exp.amount, 0);
            },
            // å°‡è¡Œç¨‹è¡¨æŒ‰æ—¥æœŸåˆ†çµ„
            groupedSchedule() {
                return this.schedule.reduce((groups, item) => {
                    const date = item.date;
                    if (!groups[date]) {
                        groups[date] = [];
                    }
                    groups[date].push(item);
                    return groups;
                }, {});
            }
        },
        methods: {
            changePage(page) {
                this.currentPage = page;
            },
            // Google Maps å°èˆªåŠŸèƒ½ (åŠŸèƒ½ 3)
            navigateTo(location) {
                const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;
                window.open(url, '_blank');
            },
            // è¨˜å¸³åœ–ç¤º
            categoryIcon(category) {
                switch (category) {
                    case 'ä½å®¿': return 'fas fa-hotel text-blue-500';
                    case 'äº¤é€š': return 'fas fa-bus text-indigo-500';
                    case 'é¤é£²': return 'fas fa-utensils text-orange-500';
                    case 'é–€ç¥¨/æ´»å‹•': return 'fas fa-ticket-alt text-purple-500';
                    case 'è³¼ç‰©': return 'fas fa-shopping-bag text-green-500';
                    default: return 'fas fa-tag text-gray-400';
                }
            },
            // æ–°å¢æ”¯å‡º
            addExpense() {
                if (this.newExpense.category && this.newExpense.amount > 0) {
                    this.expenses.unshift({
                        category: this.newExpense.category,
                        amount: this.newExpense.amount,
                        date: new Date().toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit' }).replace(/\//g, '/')
                    });
                    this.newExpense.category = '';
                    this.newExpense.amount = null;
                } else {
                    alert('è«‹é¸æ“‡é¡åˆ¥ä¸¦è¼¸å…¥æœ‰æ•ˆé‡‘é¡ï¼');
                }
            },
            // è³¼ç‰©æ¸…å–®åŠŸèƒ½
            addItem() {
                if (this.newItemText.trim() !== '') {
                    this.shoppingList.unshift({ text: this.newItemText.trim(), completed: false });
                    this.newItemText = '';
                },
            },
            removeItem(index) {
                this.shoppingList.splice(index, 1);
            },
            // æ–°å¢è¡Œç¨‹åŠŸèƒ½ (åŠŸèƒ½ 4)
            addScheduleItem() {
                if (this.newScheduleItem.date && this.newScheduleItem.title) {
                    this.schedule.push({
                        date: this.newScheduleItem.date,
                        time: this.newScheduleItem.time || 'å…¨å¤©',
                        title: this.newScheduleItem.title,
                        location: this.newScheduleItem.location || 'ç„¡åœ°é»',
                        completed: false,
                        weather: generateMockWeather() // æ–°å¢çš„ä¹Ÿçµ¦ä¸€å€‹å¤©æ°£
                    });
                    // é‡è¨­è¡¨å–®ä¸¦é—œé–‰å½ˆçª—
                    this.newScheduleItem = { date: '', time: '', title: '', location: '' };
                    this.showAddSchedule = false;
                } else {
                    alert('æ—¥æœŸå’Œæ¨™é¡Œç‚ºå¿…å¡«é …ç›®ï¼');
                }
            }
        }
    }).mount('#app')
</script>

</body>
</html>
